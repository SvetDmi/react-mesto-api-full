{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Register.js","components/Login.js","utils/Api.js","components/InfoTooltip.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","index.js"],"names":["Header","email","onLogout","isLogged","React","useState","isNaviconClick","setNaviconClick","className","path","to","onClick","src","logo","alt","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","like","cardLikeButtonClassName","type","link","name","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","avatar","about","map","Footer","ImagePopup","isOpen","onClose","PopupWithForm","title","buttonText","children","onSubmit","isLoading","action","method","noValidate","EditProfilePopup","onUpdateUser","description","onNameChange","onDescriptionChange","e","preventDefault","id","value","placeholder","required","minLength","maxLength","onChange","EditAvatarPopup","onUpdateAvatar","useRef","useEffect","current","ref","AddPlacePopup","onTitleChange","onLinkChange","Register","onRegister","setEmail","password","setPassword","autoComplete","target","Login","onLogin","api","url","headers","this","_url","_headers","res","ok","json","Promise","reject","Error","status","fetch","then","_parsAnswer","all","getInitialCards","getUserInfo","inputData","body","JSON","stringify","data","InfoTooltip","authResult","message","ProtectedRoute","loggedIn","props","BASE_URL","App","setCurrentUser","setCards","setName","setDescription","setTitle","setLink","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isDeletePopupOpen","setIsDeletePopupOpen","isSelectedCardOpen","setIsSelestedCardOpen","selectedCardData","setSelectedCardData","cardForDelete","setCardForDelete","setLoading","setLoggedIn","isInfoToolTipPopupOpen","setIsInfoTooltipPopupOpen","isAuthResult","setAuthResult","setMessage","getAllInfo","cardsData","userData","catch","err","console","log","history","useHistory","tokenCheck","token","jwt","localStorage","getItem","push","closeAllPopups","undefined","handleESCclose","evt","key","document","addEventListener","removeEventListener","Provider","removeItem","exact","i","changeLikeCardStatus","newCard","newCards","item","response","auth","setItem","userInfo","editUserInfo","newUserInfo","finally","editAvatar","newAvatar","addCard","deleteCard","filter","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e9ece888.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import React from 'react';\r\nimport { Route, Switch, Link } from 'react-router-dom';\r\nimport logo from '../images/logo.svg';\r\n\r\nfunction Header({ email, onLogout, isLogged }) {\r\n\r\n    const [isNaviconClick, setNaviconClick] = React.useState(false);\r\n\r\n    const openMenu = () => {\r\n        setNaviconClick(true)\r\n    }\r\n\r\n    const closeMenu = () => {\r\n        setNaviconClick(false)\r\n    }\r\n\r\n    return (\r\n\r\n        <header className={`page__sections ${isLogged ? 'header-auth' : 'header'}`}>\r\n            <Switch>\r\n                <Route path=\"/sign-in\">\r\n                    <Link to=\"./sign-up\" className=\"header__link\">Регистрация</Link>\r\n                </Route>\r\n                <Route path=\"/sign-up\">\r\n                    <Link to=\"./sign-in\" className=\"header__link\">Войти</Link>\r\n                </Route>\r\n                <Route path=\"/\">\r\n                    <div className={`${isNaviconClick ? 'header__menu-mobile' : 'header__menu '}`}>\r\n                        <p className=\"header__email\" >{email}</p>\r\n                        <Link to=\"./sign-in\" onClick={onLogout} className=\"header__link header__link_out\">Выйти</Link>\r\n                    </div>\r\n\r\n                    <button onClick={openMenu} className={`button header__menu-pic ${isNaviconClick ? '' : 'header__menu-pic_type_open'}`}>\r\n                    </button>\r\n                    <button onClick={closeMenu}\r\n                        className={`button header__menu-pic ${isNaviconClick ? 'header__menu-pic_type_close' : ''}`}>\r\n                    </button>\r\n\r\n                </Route>\r\n\r\n            </Switch>\r\n            <img src={logo} alt=\"Mesto Russia\" className='header__logo' />\r\n\r\n\r\n\r\n        </header>\r\n\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n\r\n    function handleClick() {\r\n        onCardClick(card);\r\n    }\r\n\r\n    function handleLikeClick() {\r\n        onCardLike(card);\r\n    }\r\n\r\n    function handleDelete() {\r\n        onCardDelete(card)\r\n    }\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n\r\n    // Показ иконки удаления\r\n    const isOwn = card.owner._id === currentUser._id;\r\n    const cardDeleteButtonClassName = (\r\n        `button elements__trash ${isOwn ? 'elements__trash_active' : ''}`\r\n    );\r\n\r\n    // Показ лайка\r\n    const isLiked = card.likes.some(like => like._id === currentUser._id);\r\n    const cardLikeButtonClassName = (\r\n        `button elements__like ${isLiked ? 'elements__like_active' : ''}`\r\n    );\r\n\r\n\r\n    return (\r\n\r\n        <li className=\"elements__item\" >\r\n            <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDelete} > </button>\r\n            <img src={card.link} alt={card.name} className=\"elements__img\" onClick={handleClick} />\r\n            <div className=\"elements__label\">\r\n                <h2 className=\"elements__title\">{card.name}</h2>\r\n                <div className=\"elements__likes\">\r\n                    <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\r\n                    <div className=\"elements__like-count\">{card.likes.length}</div>\r\n                </div>\r\n            </div>\r\n        </li>\r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from './Card';\r\n\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({\r\n    onEditProfile,\r\n    onAddPlace,\r\n    onEditAvatar,\r\n    onCardClick,\r\n    onCardLike,\r\n    onCardDelete,\r\n    cards\r\n\r\n}) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n\r\n\r\n    return (\r\n        <main>\r\n\r\n            <section className=\"profile page__sections\">\r\n                <img src={currentUser.avatar} alt={currentUser.name} className=\"profile__avatar\" />\r\n                <button type=\"button\" className=\"button profile__avatar_edit\" onClick={onEditAvatar}></button>\r\n                <div className=\"profile__info\">\r\n                    <h1 className=\"profile__title\">{currentUser.name} </h1>\r\n                    <button type=\"button\" className=\"button profile__edit\" onClick={onEditProfile}></button>\r\n                    <p className=\"profile__text\">{currentUser.about}</p>\r\n                </div>\r\n                <button type=\"button\" className=\"button profile__add\" onClick={onAddPlace}></button>\r\n            </section>\r\n\r\n            <section className=\"cards page__sections\">\r\n                <ul className=\"cards__items\">\r\n                    {\r\n                        cards.map((card) =>\r\n                            < Card\r\n                                key={card._id}\r\n                                card={card}\r\n                                onCardClick={onCardClick}\r\n                                onCardLike={onCardLike}\r\n                                onCardDelete={onCardDelete}\r\n                            />\r\n                        )\r\n                    }\r\n                </ul>\r\n            </section>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","import React from \"react\";\r\n\r\nfunction Footer() {\r\n    return (\r\n\r\n        <footer className=\"footer page__sections\">\r\n            <p className=\"footer__text\"> &#169; 2020 Mesto Russia</p>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;\r\n\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({ card, isOpen, onClose }) {\r\n\r\n    return (\r\n        <>\r\n            <div className={`popup popup_type_layout ${isOpen ? 'popup_opened' : ''}`}>\r\n                <div className=\"popup__container popup__container_layout\">\r\n                    <button type=\"button\" className=\"button popup__close\" onClick={onClose}></button>\r\n                    <img src={card.link} alt={card.name} className=\"popup__img\" />\r\n                    <h2 className=\"popup__title popup__title_layout\">{card.name}</h2>\r\n                </div>\r\n            </div>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\n\r\nfunction PopupWithForm({ name, title, buttonText, children, isOpen, onClose, onSubmit, isLoading }) {\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : ''}`} >\r\n                <div className=\"popup__container\">\r\n                    <button type=\"button\" className=\"button popup__close\" onClick={onClose}></button>\r\n                    <form onSubmit={onSubmit} name={name} action=\"#\" method=\"post\" className=\"popup__form\" noValidate>\r\n                        <h3 className=\"popup__title\">{title}</h3>\r\n                        {children}\r\n                        <button type=\"submit\" className=\"button popup__save\">{isLoading ? 'Сохранение...' : buttonText} </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\n// import { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isLoading, name, description, onNameChange, onDescriptionChange }) {\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateUser({\r\n            name,\r\n            about: description,\r\n        });\r\n    }\r\n\r\n    return (\r\n\r\n        <PopupWithForm\r\n            name=\"profile\"\r\n            title=\"Редактировать профиль\"\r\n            buttonText=\"Сохранить\"\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            isLoading={isLoading}\r\n        >\r\n            <input id=\"input-name\" type=\"text\" name=\"name\" value={name || \"\"} placeholder='Имя'\r\n                className=\"popup__input popup__input_subject_name\" required minLength=\"2\" maxLength=\"40\" onChange={onNameChange} />\r\n            <span id=\"input-name-error\" className=\"popup__input-error\"></span>\r\n            <input id=\"input-job\" type=\"text\" name=\"about\" value={description || \"\"} placeholder='О себе'\r\n                className=\"popup__input popup__input_subject_job\" required minLength=\"2\" maxLength=\"200\" onChange={onDescriptionChange} />\r\n            <span id=\"input-job-error\" className=\"popup__input-error\"></span>\r\n        </PopupWithForm>\r\n\r\n    );\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\n// import { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isLoading }) {\r\n\r\n    const avatar = React.useRef();\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateAvatar({\r\n            avatar: avatar.current.value,\r\n        });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        avatar.current.value = '';\r\n    }, [isOpen])\r\n\r\n    return (\r\n\r\n        <PopupWithForm\r\n            name=\"avatar\"\r\n            title=\"Обновить аватар\"\r\n            buttonText=\"Сохранить\"\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            isLoading={isLoading}\r\n        >\r\n\r\n\r\n            <input ref={avatar} id=\"input-link\" type=\"url\" name=\"link\" placeholder=\"Ссылка на картинку\"\r\n                className=\"popup__input popup__input_subject_pic-link\" required />\r\n            <span id=\"input-link-error\" className=\"popup__input-error\"></span>\r\n\r\n        </PopupWithForm >\r\n\r\n    );\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, isLoading, onTitleChange, onLinkChange, name, link }) {\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onAddPlace({\r\n            name: name,\r\n            link: link\r\n        });\r\n    }\r\n    // useEffect уже имелся в app, но без isOpen (это поправила) - все стейты и эффекты попапов в прошлой работе я вынесла в app.\r\n    return (\r\n\r\n        <PopupWithForm\r\n            name=\"element\"\r\n            title=\"Новое место\"\r\n            buttonText=\"Создать\"\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            isLoading={isLoading}\r\n        >\r\n            <>\r\n                <input id=\"input-name\" type=\"text\" name=\"name\" value={name} placeholder=\"Название\"\r\n                    className=\"popup__input popup__input_subject_pictitle\" required minLength=\"1\" maxLength=\"30\" onChange={onTitleChange} />\r\n                <span id=\"input-name-error\" className=\"popup__input-error\"></span>\r\n                <input id=\"input-link\" type=\"url\" name=\"link\" value={link} placeholder=\"Ссылка на картинку\"\r\n                    className=\"popup__input popup__input_subject_pic-link\" required onChange={onLinkChange} />\r\n                <span id=\"input-link-error\" className=\"popup__input-error\"></span>\r\n            </>\r\n        </PopupWithForm>\r\n\r\n    );\r\n}\r\n\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Register({ onRegister }) {\r\n\r\n    const [email, setEmail] = React.useState('');\r\n    const [password, setPassword] = React.useState('');\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        onRegister(email, password)\r\n    }\r\n\r\n    const onEmailChange = (e) => {\r\n        setEmail(e.target.value)\r\n    }\r\n\r\n    const onPasswordChange = (e) => {\r\n        setPassword(e.target.value)\r\n    }\r\n\r\n    return (\r\n        <div className=\"page__sections auth\">\r\n            <h2 className=\"auth__title\">Регистрация</h2>\r\n            <form className=\"auth__form auth__form_type_register\" method=\"post\" noValidate onSubmit={handleSubmit}>\r\n\r\n                <input id=\"input-email\" type=\"email\" autoComplete=\"username\" name=\"email\" value={email || \"\"} placeholder='Email'\r\n                    className=\"auth__input\" required minLength=\"5\" maxLength=\"40\" onChange={onEmailChange} />\r\n                <span id=\"input-email-error\" className=\"popup__input-error\"></span>\r\n                <input id=\"input-password\" type=\"password\" autoComplete=\"new-password\" name=\"password\" value={password || \"\"} placeholder='Пароль'\r\n                    className=\"auth__input\" required minLength=\"5\" maxLength=\"40\" onChange={onPasswordChange} />\r\n                <span id=\"input-password-error\" className=\"popup__input-error\"></span>\r\n                <button type=\"submit\" className=\"auth__submit\">Зарегистрироваться</button>\r\n            </form>\r\n            <Link to=\"./sign-in\" className=\"button auth__link\">Уже зарегистрированы? Войти</Link>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\n\r\nfunction Login({ onLogin }) {\r\n\r\n    const [email, setEmail] = React.useState('');\r\n    const [password, setPassword] = React.useState('');\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onLogin(email, password)\r\n\r\n    }\r\n\r\n    const onEmailChange = (e) => {\r\n        setEmail(e.target.value)\r\n    }\r\n\r\n    const onPasswordChange = (e) => {\r\n        setPassword(e.target.value)\r\n    }\r\n\r\n    return (\r\n        <div className=\"page__sections  auth\">\r\n            <h2 className=\"auth__title\">Вход</h2>\r\n            <form className=\"auth__form\" method=\"post\" noValidate onSubmit={handleSubmit}>\r\n\r\n                <input id=\"input-email\" type=\"email\" autoComplete=\"username\" name=\"email\" value={email || \"\"} placeholder='Email'\r\n                    className=\"auth__input\" required onChange={onEmailChange} />\r\n                <span id=\"input-name-error\" className=\"popup__input-error\"></span>\r\n                <input id=\"input-password\" type=\"password\" autoComplete=\"current-password\" name=\"password\" value={password || \"\"} placeholder='Пароль'\r\n                    className=\"auth__input\" required onChange={onPasswordChange} />\r\n                <span id=\"input-job-error\" className=\"popup__input-error\"></span>\r\n                <button type=\"submit\" className=\"auth__submit\">Войти</button>\r\n            </form>\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Login;","class Api {\r\n    constructor({ url, headers }) {\r\n        this._url = url\r\n        this._headers = headers\r\n    };\r\n\r\n    _parsAnswer(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n    }\r\n\r\n\r\n    // 1. Загрузка информации о пользователе с сервера\r\n    getUserInfo() {\r\n        return fetch(`${this._url}/users/me`, {\r\n            headers: this._headers\r\n        })\r\n            .then(this._parsAnswer)\r\n        //       .then((res) => {\r\n        // console.log(res)\r\n        //       })\r\n    };\r\n\r\n    // 2. Загрузка карточек с сервера\r\n    getInitialCards() {\r\n        return fetch(`${this._url}/cards`, {\r\n            headers: this._headers\r\n        })\r\n            .then(this._parsAnswer)\r\n        //       .then((res) => {\r\n        // console.log(res);\r\n        //       })\r\n    };\r\n\r\n\r\n    getAllInfo() {\r\n        return Promise.all([this.getInitialCards(), this.getUserInfo()])\r\n    }\r\n\r\n    // 3. Редактирование профиля\r\n    editUserInfo(inputData) {\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: inputData.name,\r\n                about: inputData.about\r\n            })\r\n        })\r\n            .then(this._parsAnswer)\r\n    }\r\n\r\n    // 4. Добавление новой карточки\r\n    addCard(data) {\r\n        return fetch(`${this._url}/cards`, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                link: data.link\r\n            })\r\n        })\r\n            .then(this._parsAnswer)\r\n\r\n    }\r\n\r\n    // 7. Удаление карточки\r\n    deleteCard(_id) {\r\n        return fetch(`${this._url}/cards/${_id}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers\r\n        })\r\n            .then(this._parsAnswer)\r\n    }\r\n\r\n\r\n    // 8. Постановка и снятие лайка\r\n    changeLikeCardStatus(_id, isLiked) {\r\n        return fetch(`${this._url}/cards/likes/${_id}`, {\r\n            method: `${isLiked ? 'PUT' : 'DELETE'}`,\r\n            headers: this._headers\r\n        })\r\n            .then(this._parsAnswer)\r\n    }\r\n\r\n\r\n    // 9. Обновление аватара пользователя  \r\n    editAvatar(inputData) {\r\n        return fetch(`${this._url}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                avatar: inputData.avatar\r\n            })\r\n        })\r\n            .then(this._parsAnswer)\r\n    }\r\n}\r\n\r\n\r\nexport const api = new Api({\r\n    url: 'http://api.svetdmi.students.nomoredomains.rocks/',\r\n    headers: {\r\n        'Content-Type': 'application/json'\r\n    }\r\n});","import React from 'react';\r\n\r\n\r\n\r\nfunction InfoTooltip({ isOpen, onClose, authResult, message }) {\r\n\r\n    return (\r\n\r\n        <div className={`popup  ${isOpen ? 'popup_opened' : ''}`}>\r\n            <div className=\"popup__container\">\r\n                <button type=\"button\" className=\"button popup__close\" onClick={onClose}></button>\r\n                <div className={`popup__info ${authResult ? 'popup__info_type_yes' : 'popup__info_type_no'}`}\r\n                ></div>\r\n                <h2 className=\"popup__title popup__title_infotooltip\">{message}</h2>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default InfoTooltip;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ loggedIn, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => loggedIn ? <Route {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute; ","export const BASE_URL = 'http://api.svetdmi.students.nomoredomains.rocks/';\r\n\r\nexport const headers = {\r\n    'Content-Type': 'application/json'\r\n};\r\n\r\nexport const register = (email, password) => {\r\n    return fetch(`${BASE_URL}/signup`, {\r\n        method: 'POST',\r\n        headers: headers,\r\n        body: JSON.stringify({ email, password })\r\n    })\r\n        .then((response) => {\r\n            return response.json();\r\n        })\r\n        .then((res) => {\r\n            console.log(res);\r\n            return res;\r\n        })\r\n};\r\n\r\nexport const login = (email, password) => {\r\n    return fetch(`${BASE_URL}/signin`, {\r\n        method: 'POST',\r\n        headers: headers,\r\n        body: JSON.stringify({ email, password })\r\n    })\r\n        .then((response => response.json()))\r\n        .then((data) => {\r\n            if (data.token) {\r\n                localStorage.setItem('jwt', data.token);\r\n                return data;\r\n            } else {\r\n                return;\r\n            }\r\n        })\r\n};\r\n\r\nexport const checkToken = (token) => {\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`,\r\n        }\r\n    })\r\n        .then(res => res.json())\r\n        .then(data => data)\r\n};","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React from 'react';\r\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport ImagePopup from './ImagePopup';\r\n\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport Register from './Register';\r\nimport Login from './Login';\r\n\r\nimport { api } from '../utils/Api.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport * as auth from '../utils/auth';\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n\r\n    // Стейты\r\n    const [currentUser, setCurrentUser] = React.useState({});\r\n    const [cards, setCards] = React.useState([]);\r\n    const [name, setName] = React.useState('');\r\n\r\n    const [description, setDescription] = React.useState('');\r\n\r\n    const [title, setTitle] = React.useState('');\r\n    const [link, setLink] = React.useState('');\r\n\r\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n    const [isDeletePopupOpen, setIsDeletePopupOpen] = React.useState(false);\r\n    const [isSelectedCardOpen, setIsSelestedCardOpen] = React.useState(false);\r\n    const [selectedCardData, setSelectedCardData] = React.useState({});\r\n    const [cardForDelete, setCardForDelete] = React.useState({})\r\n    const [isLoading, setLoading] = React.useState(false);\r\n\r\n    const [loggedIn, setLoggedIn] = React.useState(false);\r\n\r\n\r\n    const [isInfoToolTipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\r\n\r\n    const [isAuthResult, setAuthResult] = React.useState(false);\r\n    const [message, setMessage] = React.useState('');\r\n    const [email, setEmail] = React.useState('');\r\n\r\n\r\n\r\n    // Загрузка данных\r\n\r\n    React.useEffect(() => {\r\n        api.getAllInfo()\r\n            .then(([cardsData, userData]) => {\r\n                setCurrentUser(userData)\r\n                setCards(cardsData)\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            });\r\n    }, []);\r\n\r\n    // Профиль\r\n\r\n    function handleUpdateUser(userInfo) {\r\n        setLoading(true)\r\n        api.editUserInfo(userInfo)\r\n            .then((newUserInfo) => {\r\n                setCurrentUser(newUserInfo)\r\n                closeAllPopups();\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n            .finally(() => {\r\n\r\n                setLoading(false)\r\n            })\r\n    }\r\n\r\n    function handleUpdateAvatar(avatar) {\r\n        setLoading(true)\r\n        api.editAvatar(avatar)\r\n            .then((newAvatar) => {\r\n                setCurrentUser(newAvatar)\r\n                closeAllPopups();\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n            .finally(() => {\r\n\r\n                setLoading(false)\r\n            })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n    }, [currentUser]);\r\n\r\n    function handleNameChange(e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function handleDescriptionChange(e) {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    // КАРТОЧКИ\r\n\r\n\r\n    function handleAddPlaceSubmit(cardsData) {\r\n        setLoading(true)\r\n        api.addCard(cardsData)\r\n            .then((newCard) => {\r\n                setCards([newCard, ...cards])\r\n                closeAllPopups()\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n\r\n            })\r\n            .finally(() => {\r\n                setLoading(false)\r\n            })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setTitle('');\r\n        setLink('');\r\n    }, [isAddPlacePopupOpen]);\r\n\r\n    function handleTitleChange(e) {\r\n        setTitle(e.target.value);\r\n    }\r\n\r\n    function handleLinkChange(e) {\r\n        setLink(e.target.value);\r\n    }\r\n\r\n\r\n    // открыть из карточки попап с картинкой\r\n\r\n    function handleCardClick(card) {\r\n        setIsSelestedCardOpen(true);\r\n        setSelectedCardData({\r\n            link: card.link,\r\n            name: card.name,\r\n            alt: card.name\r\n        })\r\n    }\r\n\r\n    // поставить-удалить лайк\r\n\r\n    function handleCardLike(card) {\r\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n        api.changeLikeCardStatus(card._id, !isLiked)\r\n            .then((newCard) => {\r\n                const newCards = cards.map((item) => item._id === card._id ? newCard : item);\r\n                setCards(newCards);\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            });\r\n    }\r\n\r\n    function handleCardDeleteRequest(card) {\r\n        setCardForDelete(card);\r\n        setIsDeletePopupOpen(true);\r\n    }\r\n\r\n    function handleCardDelete(evt) {\r\n        evt.preventDefault();\r\n        api.deleteCard(cardForDelete._id)\r\n            .then(() => {\r\n                const newCards = cards.filter((card) => card._id !== cardForDelete._id);\r\n                setCards(newCards);\r\n                setIsDeletePopupOpen(false);\r\n            })\r\n            .catch(err => console.log(`При удалении карточки: ${err}`))\r\n    }\r\n\r\n    // АВТОРИЗАЦИЯ\r\n\r\n    const history = useHistory();\r\n\r\n    const tokenCheck = () => {\r\n        const jwt = localStorage.getItem('jwt');\r\n        if (jwt) {\r\n            auth.checkToken(jwt).then((res) => {\r\n                if (res) {\r\n                    setLoggedIn(true)\r\n                    setEmail(res.data.email)\r\n\r\n                }\r\n                history.push('/');\r\n            })\r\n                .catch((err) => console.log(err))\r\n        }\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        tokenCheck();\r\n    }, []);\r\n\r\n    function onRegister(email, password) {\r\n        return auth.register(email, password)\r\n            .then((res) => {\r\n                if (res.data) {\r\n                    setAuthResult(true);\r\n                    setMessage('Вы успешно зарегистрировались!');\r\n                    setIsInfoTooltipPopupOpen(true);\r\n                    history.push('/sign-in');\r\n                }\r\n                else {\r\n                    setAuthResult(false);\r\n                    setMessage('Что-то пошло не так! Попробуйте ещё раз');\r\n                    setIsInfoTooltipPopupOpen(true);\r\n                }\r\n            })\r\n            .catch((err) => console.log('некорректно заполнено одно из полей'));\r\n\r\n    }\r\n\r\n\r\n    function onLogin(email, password) {\r\n        return auth.login(email, password)\r\n            .then((res) => {\r\n                if (!res) {\r\n                    setLoggedIn(false);\r\n                    setMessage('Проверьте правильность введения email и пароля');\r\n                    setIsInfoTooltipPopupOpen(true);\r\n\r\n                }\r\n                else {\r\n                    localStorage.setItem('token', res.token);\r\n                    tokenCheck();\r\n\r\n                }\r\n            })\r\n            .catch((err) => console.log('Пользователь с таким email не найден'));\r\n    }\r\n\r\n    function onLogout() {\r\n        localStorage.removeItem('jwt');\r\n        setLoggedIn(false);\r\n        setEmail('');\r\n        history.push('/sign-in');\r\n    }\r\n\r\n\r\n    // ПОПАПЫ\r\n\r\n    // состояние попапов\r\n\r\n\r\n    //Обработчики попапов\r\n    function handleEditAvatarClick() {\r\n        setIsEditAvatarPopupOpen(true);\r\n    }\r\n\r\n    function handleEditProfileClick() {\r\n        setIsEditProfilePopupOpen(true);\r\n    }\r\n\r\n    function handleAddPlaceClick() {\r\n        setIsAddPlacePopupOpen(true);\r\n    }\r\n\r\n    function closeAllPopups() {\r\n        setIsEditAvatarPopupOpen(false);\r\n        setIsEditProfilePopupOpen(false);\r\n        setIsAddPlacePopupOpen(false);\r\n        setIsSelestedCardOpen(false);\r\n        setIsDeletePopupOpen(false);\r\n        setIsInfoTooltipPopupOpen(false);\r\n        setSelectedCardData({});\r\n        setCardForDelete(undefined);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        function handleESCclose(evt) {\r\n            if (evt.key === \"Escape\") {\r\n                closeAllPopups();\r\n            }\r\n        }\r\n        document.addEventListener('keydown', handleESCclose);\r\n        return () => {\r\n            document.removeEventListener('keydown', handleESCclose);\r\n        }\r\n    }, [])\r\n\r\n\r\n\r\n    // Возврат\r\n    return (\r\n        <div className=\"page\">\r\n            <CurrentUserContext.Provider value={currentUser}>\r\n\r\n                <div className=\"App\">\r\n                    <Header\r\n                        email={email}\r\n                        onLogout={onLogout}\r\n                        isLogged={loggedIn}\r\n\r\n                    />\r\n                    <Switch>\r\n                        <ProtectedRoute exact path=\"/\" loggedIn={loggedIn}>\r\n                            <Main\r\n                                onEditProfile={handleEditProfileClick}\r\n                                onAddPlace={handleAddPlaceClick}\r\n                                onEditAvatar={handleEditAvatarClick}\r\n                                onCardClick={handleCardClick}\r\n                                onCardLike={handleCardLike}\r\n                                onCardDelete={handleCardDeleteRequest}\r\n                                cards={cards}\r\n                            />\r\n                            <Footer />\r\n\r\n                        </ProtectedRoute>\r\n\r\n                        <Route exact path=\"/sign-up\">\r\n                            <Register\r\n                                onRegister={onRegister}\r\n                            />\r\n                        </Route>\r\n\r\n                        <Route path=\"/sign-in\">\r\n                            <Login\r\n                                onLogin={onLogin}\r\n                            />\r\n                        </Route>\r\n\r\n\r\n                        <Route>\r\n                            {loggedIn ? <Redirect to='/' /> : <Redirect to='/sign-in' />}\r\n                        </Route>\r\n\r\n                    </Switch>\r\n\r\n\r\n\r\n                    <EditProfilePopup\r\n                        isOpen={isEditProfilePopupOpen}\r\n                        onClose={closeAllPopups}\r\n                        onUpdateUser={handleUpdateUser}\r\n                        isLoading={isLoading}\r\n                        onNameChange={handleNameChange}\r\n                        onDescriptionChange={handleDescriptionChange}\r\n                        name={name}\r\n                        description={description}\r\n                    />\r\n\r\n                    <EditAvatarPopup\r\n                        isOpen={isEditAvatarPopupOpen}\r\n                        onClose={closeAllPopups}\r\n                        onUpdateAvatar={handleUpdateAvatar}\r\n                        isLoading={isLoading}\r\n                    />\r\n\r\n                    <AddPlacePopup\r\n                        isOpen={isAddPlacePopupOpen}\r\n                        onClose={closeAllPopups}\r\n                        onAddPlace={handleAddPlaceSubmit}\r\n                        isLoading={isLoading}\r\n                        onTitleChange={handleTitleChange}\r\n                        onLinkChange={handleLinkChange}\r\n                        name={title}\r\n                        link={link}\r\n                    />\r\n\r\n                    <PopupWithForm\r\n                        name=\"deleteCard\"\r\n                        title=\"Вы уверены?\"\r\n                        buttonText=\"Да\"\r\n                        isOpen={isDeletePopupOpen}\r\n                        onClose={closeAllPopups}\r\n                        onSubmit={handleCardDelete}\r\n                    >\r\n                    </PopupWithForm>\r\n\r\n\r\n                    <ImagePopup\r\n                        card={selectedCardData}\r\n                        isOpen={isSelectedCardOpen}\r\n                        onClose={closeAllPopups}\r\n\r\n                    ></ImagePopup>\r\n\r\n                    <InfoTooltip\r\n                        isOpen={isInfoToolTipPopupOpen}\r\n                        onClose={closeAllPopups}\r\n                        authResult={isAuthResult}\r\n                        message={message}\r\n                    ></InfoTooltip>\r\n\r\n                </div>\r\n\r\n\r\n            </CurrentUserContext.Provider>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n// import reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n// reportWebVitals();\r\n"],"sourceRoot":""}